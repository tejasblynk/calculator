<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Super Pro Calculator — Neon Math OS</title>
  <script src="https://cdn.jsdelivr.net/npm/mathjs@11.11.0/lib/browser/math.js"></script>
  <style>
    :root{
      --bg:#02030a; --card:#06102a; --neon:#6afff0; --vio:#7b6bff; --txt:#e9f6ff; --muted:#9fb0d6;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:radial-gradient(1000px 400px at 10% 10%, #08143a 0%, #02030a 40%, #000 100%);color:var(--txt);font-family:Inter,system-ui}
    .app{max-width:1200px;margin:24px auto;padding:16px}
    header{display:flex;align-items:center;gap:16px}
    .logo{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--vio),var(--neon));display:grid;place-items:center;color:#021124;font-weight:900;box-shadow:0 0 30px rgba(106,255,240,.35)}
    h1{margin:0;font-size:22px}
    .lead{color:var(--muted);font-size:12px}
    .shell{display:grid;grid-template-columns:1fr 380px;gap:16px;margin-top:16px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));border-radius:14px;padding:14px;border:1px solid rgba(120,140,255,.08);box-shadow:0 20px 60px rgba(0,0,0,.6)}
    .tabs{display:flex;gap:8px;margin-bottom:10px}
    .tab{padding:8px 12px;border-radius:10px;border:1px solid transparent;background:transparent;color:var(--muted);cursor:pointer}
    .tab.active{color:var(--neon);border-color:rgba(106,255,240,.3);box-shadow:0 0 16px rgba(106,255,240,.25)}
    .panel{padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.05)}
    .display{width:100%;padding:14px;border-radius:12px;background:#020827;color:var(--neon);border:1px solid rgba(106,255,240,.25);font-size:20px;font-family:ui-monospace}
    .keygrid{display:grid;grid-template-columns:repeat(6,1fr);gap:8px;margin-top:10px}
    .key{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,.05);background:#050b24;color:#dff8f5;cursor:pointer}
    .key.accent{background:linear-gradient(135deg,var(--neon),var(--vio));color:#021124;font-weight:700}
    .row{display:flex;gap:8px}
    .chat{display:flex;flex-direction:column;height:100%}
    .chatwin{flex:1;overflow:auto;padding:10px;border-radius:10px;background:#020827;border:1px solid rgba(255,255,255,.05)}
    .msg{padding:8px 10px;border-radius:10px;margin-bottom:8px;max-width:90%}
    .user{align-self:flex-end;background:#0b1b4a;border:1px solid rgba(123,107,255,.25)}
    .bot{align-self:flex-start;background:#062c2a;border:1px solid rgba(106,255,240,.25)}
    .input-row{display:flex;gap:8px;margin-top:8px}
    input,select{background:#020827;border:1px solid rgba(255,255,255,.1);color:var(--muted);padding:8px;border-radius:8px}
    footer{margin-top:8px;text-align:center;color:var(--muted);font-size:12px}
    @media(max-width:980px){.shell{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="app">
  <header>
    <div class="logo">Σ</div>
    <div>
      <h1>Super Pro Calculator — Neon Math OS</h1>
      <div class="lead">Command-driven calculator with memory, navigation, and strong offline AI.</div>
    </div>
  </header>

  <div class="shell">
    <div class="card">
      <div class="tabs">
        <button class="tab active" data-tab="calc">Calculator</button>
        <button class="tab" data-tab="stats">Statistics</button>
        <button class="tab" data-tab="geo">Geometry</button>
        <button class="tab" data-tab="prob">Probability</button>
        <button class="tab" data-tab="tools">Tools</button>
      </div>

      <div class="panel" data-panel="calc">
        <input id="disp" class="display" placeholder="Type: 2*(3+4)  |  let a = 5  |  use a*10" />
        <div class="keygrid">
          <button class="key" data-i="7">7</button><button class="key" data-i="8">8</button><button class="key" data-i="9">9</button><button class="key" data-i="/">÷</button><button class="key" data-i="%">mod</button><button class="key accent" id="eq">=</button>
          <button class="key" data-i="4">4</button><button class="key" data-i="5">5</button><button class="key" data-i="6">6</button><button class="key" data-i="*">×</button><button class="key" data-i="^">^</button><button class="key" data-i="sqrt(">√</button>
          <button class="key" data-i="1">1</button><button class="key" data-i="2">2</button><button class="key" data-i="3">3</button><button class="key" data-i="-">−</button><button class="key" data-i="log(">log</button><button class="key" data-i="ln(">ln</button>
          <button class="key" data-i="0">0</button><button class="key" data-i=".">.</button><button class="key" id="bk">⌫</button><button class="key" data-i="+">+</button><button class="key" id="cl">C</button><button class="key" id="ans">Ans</button>
        </div>
      </div>

      <div class="panel" data-panel="stats" style="display:none">
        <div class="row"><input id="statIn" placeholder="1,2,2,3,4"/><button class="key accent" id="statBtn">Compute</button></div>
        <div id="statOut" style="margin-top:10px"></div>
      </div>

      <div class="panel" data-panel="geo" style="display:none">
        <div class="row"><select id="shape"><option value="r">Rectangle</option><option value="s">Square</option><option value="t">Triangle</option><option value="c">Circle</option></select>
        <input id="g1" placeholder="a / r / base"/><input id="g2" placeholder="b / height"/><button class="key accent" id="geoBtn">Go</button></div>
        <div id="geoOut" style="margin-top:10px"></div>
      </div>

      <div class="panel" data-panel="prob" style="display:none">
        <div class="row"><input id="pf" placeholder="favorable"/><input id="pt" placeholder="total"/><button class="key accent" id="probBtn">P</button></div>
        <div id="probOut" style="margin-top:10px"></div>
      </div>

      <div class="panel" data-panel="tools" style="display:none">
        <div class="row"><input id="ta" placeholder="a"/><input id="tb" placeholder="b"/><button class="key" id="gcdBtn">GCD</button><button class="key" id="lcmBtn">LCM</button></div>
        <div id="toolOut" style="margin-top:10px"></div>
      </div>
    </div>

    <div class="card chat">
      <h3 style="margin:0;color:var(--neon)">AI Command Bot</h3>
      <div id="chat" class="chatwin"></div>
      <div class="input-row"><input id="chatIn" placeholder="hi | let x=5 | go to stats | solve 2x^2+3x-5=0"/><button class="key accent" id="send">Send</button></div>
      <div class="lead">Understands math, stores variables, and can navigate tabs.</div>
    </div>
  </div>
  <footer>Neon Math OS • Offline AI Engine</footer>
</div>

<script>
const $=s=>document.querySelector(s); const $$=s=>Array.from(document.querySelectorAll(s));
let mem = {}; let lastAns=null;

// Tabs
$$('.tab').forEach(t=>t.onclick=()=>{ $$('.tab').forEach(x=>x.classList.remove('active')); t.classList.add('active'); const k=t.dataset.tab; $$('[data-panel]').forEach(p=>p.style.display=p.dataset.panel===k?'':'none'); });
function go(tab){ const t=$(`.tab[data-tab="${tab}"]`); if(t) t.click(); }

// Calculator
$$('.key[data-i]').forEach(b=>b.onclick=()=>$('#disp').value+=b.dataset.i);
$('#cl').onclick=()=>$('#disp').value=''; $('#bk').onclick=()=>$('#disp').value=$('#disp').value.slice(0,-1);
$('#ans').onclick=()=>{ if(lastAns!=null) $('#disp').value+=String(lastAns); };
$('#eq').onclick=()=>handle($('#disp').value,true);
$('#disp').addEventListener('keydown',e=>{ if(e.key==='Enter'){e.preventDefault(); handle($('#disp').value,true);} });

function evalExpr(expr){ expr=expr.replace(/÷/g,'/').replace(/×/g,'*'); return math.evaluate(expr, mem); }

// Panels
$('#statBtn').onclick=()=>{ const a=$('#statIn').value.split(',').map(Number).filter(n=>!isNaN(n)); if(!a.length) return; const m=a.reduce((s,v)=>s+v,0)/a.length; const s=[...a].sort((x,y)=>x-y); const med=s.length%2?s[(s.length-1)/2]:(s[s.length/2-1]+s[s.length/2])/2; $('#statOut').innerText=`Mean=${m}  Median=${med}`; };
$('#geoBtn').onclick=()=>{ const a=+$('#g1').value,b=+$('#g2').value; const s=$('#shape').value; let o=''; if(s==='r')o=`Area=${a*b} P=${2*(a+b)}`; if(s==='s')o=`Area=${a*a} P=${4*a}`; if(s==='t')o=`Area=${0.5*a*b}`; if(s==='c')o=`Area=${Math.PI*a*a} C=${2*Math.PI*a}`; $('#geoOut').innerText=o; };
$('#probBtn').onclick=()=>{ const f=+$('#pf').value,t=+$('#pt').value; $('#probOut').innerText=`P=${f/t}`; };
$('#gcdBtn').onclick=()=>{ const a=+$('#ta').value,b=+$('#tb').value; $('#toolOut').innerText='GCD='+gcd(a,b); };
$('#lcmBtn').onclick=()=>{ const a=+$('#ta').value,b=+$('#tb').value; const g=gcd(a,b); $('#toolOut').innerText='LCM='+(a*b/g); };

// Chat
function add(msg,who){ const d=document.createElement('div'); d.className='msg '+who; d.textContent=msg; $('#chat').appendChild(d); $('#chat').scrollTop=1e9; }
$('#send').onclick=()=>{ const q=$('#chatIn').value.trim(); if(!q)return; add(q,'user'); $('#chatIn').value=''; handle(q,false); };
$('#chatIn').addEventListener('keydown',e=>{ if(e.key==='Enter'){e.preventDefault(); $('#send').click();} });

function handle(q,fromCalc){ const l=q.toLowerCase();
  if(/^(hi|hello|hey|namaste)/.test(l)){ add('Hello! I am your math OS. You can say: let x=5, use x*10, go to stats, solve equations.','bot'); return; }

  // Navigation commands
  if(/go to|open|show/.test(l)){
    if(/stats/.test(l)) return go('stats'), add('Opened Statistics.','bot');
    if(/geometry|geo/.test(l)) return go('geo'), add('Opened Geometry.','bot');
    if(/prob/.test(l)) return go('prob'), add('Opened Probability.','bot');
    if(/tools/.test(l)) return go('tools'), add('Opened Tools.','bot');
    if(/calc/.test(l)) return go('calc'), add('Back to Calculator.','bot');
  }

  // Variable assignment: let x = 5
  const m = q.match(/let\s+([a-zA-Z]\w*)\s*=\s*(.+)/i);
  if(m){ try{ const v=evalExpr(m[2]); mem[m[1]]=v; add(`${m[1]} = ${v} stored.`,`bot`); return; }catch{ add('Cannot assign that.','bot'); return; } }

  // Use variables
  try{
    const r = evalExpr(q);
    lastAns=r;
    if(fromCalc) $('#disp').value = r;
    add('= '+r,'bot'); return;
  }catch{}

  // Quadratic solve simple
  if(/solve|=0/.test(l)){
    const t=q.replace(/\s+/g,''); const m2=t.match(/([+-]?\d*)x\^2([+-]?\d*)x([+-]?\d*)=0/);
    if(m2){ const a=Number(m2[1]||1), b=Number(m2[2]||0), c=Number(m2[3]||0); const D=b*b-4*a*c; if(D>=0){ const r1=(-b+Math.sqrt(D))/(2*a); const r2=(-b-Math.sqrt(D))/(2*a); add(`Roots: ${r1}, ${r2}`,'bot'); } else { add('Complex roots.','bot'); } return; }
  }

  add('I understand math, variables, and commands like "go to stats". Try: let a=10, use a^2, or go to geometry.','bot');
}

function gcd(a,b){ a=Math.abs(a); b=Math.abs(b); while(b){[a,b]=[b,a%b]} return a; }

add('Neon Math OS ready. Say hi, define variables, or command me.','bot');
</script>
</body>
</html>
